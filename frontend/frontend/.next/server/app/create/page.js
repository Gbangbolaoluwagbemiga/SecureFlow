(()=>{var e={};e.id=323,e.ids=[323],e.modules={1332:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var r=s(28625);s(64996);var a=s(36761);function i({className:e,type:t,...s}){return(0,r.jsx)("input",{type:t,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5106:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>l,TN:()=>c,XL:()=>d});var r=s(28625),a=s(64996),i=s(44714),n=s(36761);let o=(0,i.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=a.forwardRef(({className:e,variant:t,...s},a)=>(0,r.jsx)("div",{ref:a,role:"alert",className:(0,n.cn)(o({variant:t}),e),...s}));l.displayName="Alert";let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));d.displayName="AlertTitle";let c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...t}));c.displayName="AlertDescription"},8495:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(33922).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},10490:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>J});var r=s(28625),a=s(64996),i=s(55918),n=s(22167),o=s(62848),l=s(20702),d=s(82825),c=s(33922);let u=(0,c.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var m=s(46180),p=s(22154),h=s(79285),x=s(5950),f=s(97861),g=s(11107),b=s(55136),j=s(1332),y=s(72478),v=s(57144),N=s(5106),w=s(47887);function k({formData:e,onUpdate:t,isContractPaused:s,errors:a={}}){return(0,r.jsxs)(b.Zp,{className:"glass border-primary/20 p-6",children:[(0,r.jsx)(b.aR,{children:(0,r.jsx)(b.ZB,{children:"Project Details"})}),(0,r.jsxs)(b.Wu,{className:"space-y-6",children:[s&&(0,r.jsxs)(N.Fc,{variant:"destructive",children:[(0,r.jsx)(w.A,{className:"h-4 w-4"}),(0,r.jsx)(N.TN,{children:"Contract is currently paused. Escrow creation is temporarily disabled."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(y.J,{htmlFor:"projectTitle",children:"Project Title *"}),(0,r.jsx)(j.p,{id:"projectTitle",value:e.projectTitle,onChange:e=>t({projectTitle:e.target.value}),placeholder:"Enter project title",required:!0,minLength:3,className:a.projectTitle?"border-red-500 focus:border-red-500":""}),a.projectTitle&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:a.projectTitle})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(y.J,{htmlFor:"duration",children:"Duration (days) *"}),(0,r.jsx)(j.p,{id:"duration",type:"number",value:e.duration,onChange:e=>t({duration:e.target.value}),placeholder:"e.g., 30",min:"1",max:"365",required:!0,className:a.duration?"border-red-500 focus:border-red-500":""}),a.duration&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:a.duration})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(y.J,{htmlFor:"projectDescription",children:"Project Description *"}),(0,r.jsx)(v.T,{id:"projectDescription",value:e.projectDescription,onChange:e=>t({projectDescription:e.target.value}),placeholder:"Describe the project requirements and deliverables...",className:`min-h-[120px] ${a.projectDescription?"border-red-500 focus:border-red-500":""}`,required:!0,minLength:50}),a.projectDescription?(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:a.projectDescription}):(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum 50 characters required"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(y.J,{htmlFor:"totalBudget",children:"Total Budget (tokens) *"}),(0,r.jsx)(j.p,{id:"totalBudget",type:"number",value:e.totalBudget,onChange:e=>t({totalBudget:e.target.value}),placeholder:"e.g., 1000",min:"0.01",step:"0.01",required:!0,className:a.totalBudget?"border-red-500 focus:border-red-500":""}),a.totalBudget?(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:a.totalBudget}):(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum 0.01 tokens required"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(y.J,{htmlFor:"beneficiary",children:["Beneficiary Address ",!e.isOpenJob&&"*"]}),(0,r.jsx)(j.p,{id:"beneficiary",value:e.beneficiary,onChange:e=>t({beneficiary:e.target.value}),placeholder:"0x...",disabled:e.isOpenJob,required:!e.isOpenJob,pattern:"^0x[a-fA-F0-9]{40}$",className:a.beneficiary?"border-red-500 focus:border-red-500":""}),a.beneficiary?(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:a.beneficiary}):(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.isOpenJob?"Leave empty for open job applications":"Valid Ethereum address required for direct escrow"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"useNativeToken",checked:e.useNativeToken,onChange:e=>t({useNativeToken:e.target.checked}),className:"rounded"}),(0,r.jsx)(y.J,{htmlFor:"useNativeToken",children:"Use Native Token (MON)"})]}),!e.useNativeToken&&(0,r.jsxs)("div",{children:[(0,r.jsx)(y.J,{htmlFor:"tokenAddress",children:"Token Address *"}),(0,r.jsx)(j.p,{id:"tokenAddress",value:e.token,onChange:e=>t({token:e.target.value}),placeholder:"0x...",required:!e.useNativeToken,pattern:"^0x[a-fA-F0-9]{40}$",className:a.tokenAddress?"border-red-500 focus:border-red-500":""}),a.tokenAddress?(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:a.tokenAddress}):(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Enter the contract address of your ERC20 token deployed on Monad Testnet"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"isOpenJob",checked:e.isOpenJob,onChange:e=>t({isOpenJob:e.target.checked}),className:"rounded"}),(0,r.jsx)(y.J,{htmlFor:"isOpenJob",children:"Open Job (Allow Applications)"})]})]})]})]})}let T=(0,c.A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);var A=s(51275);let C=(0,c.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var M=s(19205),E=s(5818),P=s(19084);let F=(0,c.A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);function B({onResult:e,onClose:t,currentMilestoneIndex:s,existingMilestones:n}){let{toast:o}=(0,l.dj)(),[d,c]=(0,a.useState)(""),[u,m]=(0,a.useState)([]),[x,f]=(0,a.useState)(!1),g=async()=>{if(!d.trim()){o({title:"Enter a prompt",description:"Please describe what you need for this milestone",variant:"destructive"});return}f(!0),setTimeout(()=>{m([`Complete ${d} with comprehensive documentation and testing. Deliverables include source code, test cases, and deployment guide.`,`Develop and implement ${d} following best practices. Includes code review, unit tests, and integration with existing systems.`,`Design and build ${d} with focus on scalability and performance. Deliverables include architecture diagrams, implementation, and performance benchmarks.`]),f(!1)},1500)},j=e=>{navigator.clipboard.writeText(e),o({title:"Copied to clipboard",description:"Milestone description copied successfully"})},N=t=>{if(null!==s){let r=[...n];r[s]={...r[s],description:t},e(r)}else e([...n,{description:t,amount:""}]);o({title:"Milestone updated",description:"AI-generated description has been added to your milestone"})};return(0,r.jsxs)(b.Zp,{className:"glass border-accent/20 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)(T,{className:"h-5 w-5 text-accent"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"AI Milestone Writer"}),(0,r.jsx)(M.E,{variant:"outline",className:"ml-auto",children:(0,r.jsx)("span",{className:"text-xs",children:"Beta"})}),(0,r.jsx)(i.$,{variant:"ghost",size:"sm",onClick:t,className:"ml-2 h-8 w-8 p-0",children:(0,r.jsx)(E.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(y.J,{htmlFor:"ai-prompt",children:"Describe your milestone"}),(0,r.jsx)(v.T,{id:"ai-prompt",placeholder:"e.g., frontend development for user dashboard",value:d,onChange:e=>c(e.target.value),rows:3})]}),(0,r.jsx)(i.$,{onClick:g,disabled:x,className:"w-full gap-2",children:x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.A,{className:"h-4 w-4 animate-spin"}),"Generating..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T,{className:"h-4 w-4"}),"Generate Descriptions"]})}),(0,r.jsx)(h.N,{children:u.length>0&&(0,r.jsxs)(p.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[(0,r.jsx)(y.J,{children:"AI Suggestions"}),u.map((e,t)=>(0,r.jsx)(p.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},children:(0,r.jsxs)(b.Zp,{className:"p-4 border-muted hover:border-primary/50 transition-colors",children:[(0,r.jsx)("p",{className:"text-sm leading-relaxed mb-3",children:e}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(i.$,{onClick:()=>N(e),size:"sm",variant:"default",className:"gap-2",children:"Use This"}),(0,r.jsxs)(i.$,{onClick:()=>j(e),size:"sm",variant:"outline",className:"gap-2",children:[(0,r.jsx)(F,{className:"h-3 w-3"}),"Copy"]})]})]})},t))]})})]})]})}function D({milestones:e,onUpdate:t,showAIWriter:s,onToggleAIWriter:a,currentMilestoneIndex:n,onSetCurrentMilestoneIndex:o,totalBudget:l,errors:d={}}){let c=s=>{e.length>1&&t(e.filter((e,t)=>t!==s))},u=(s,r,a)=>{let i=[...e];i[s]={...i[s],[r]:a},t(i)};return(0,r.jsxs)(b.Zp,{className:"glass border-primary/20 p-6",children:[(0,r.jsx)(b.aR,{children:(0,r.jsx)(b.ZB,{children:"Milestones"})}),(0,r.jsxs)(b.Wu,{className:"space-y-4",children:[s&&(0,r.jsx)(B,{onResult:e=>{t(e),a(!1),o(null)},onClose:()=>{a(!1),o(null)},currentMilestoneIndex:n,existingMilestones:e}),e.map((t,s)=>(0,r.jsxs)("div",{className:"border border-border/40 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h4",{className:"font-medium",children:["Milestone ",s+1]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(i.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{o(s),a(!0)},children:[(0,r.jsx)(T,{className:"h-4 w-4 mr-1"}),"AI Writer"]}),e.length>1&&(0,r.jsx)(i.$,{type:"button",variant:"outline",size:"sm",onClick:()=>c(s),children:(0,r.jsx)(A.A,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(y.J,{htmlFor:`milestone-${s}-description`,children:"Description *"}),(0,r.jsx)(v.T,{id:`milestone-${s}-description`,value:t.description,onChange:e=>u(s,"description",e.target.value),placeholder:"Describe what needs to be delivered...",className:`min-h-[80px] ${d.milestones?"border-red-500 focus:border-red-500":""}`,required:!0,minLength:10}),d.milestones?(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.milestones}):(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum 10 characters required"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(y.J,{htmlFor:`milestone-${s}-amount`,children:"Amount (tokens) *"}),(0,r.jsx)(j.p,{id:`milestone-${s}-amount`,type:"number",value:t.amount,onChange:e=>u(s,"amount",e.target.value),placeholder:"e.g., 500",min:"0.01",step:"0.01",required:!0,className:d.milestones?"border-red-500 focus:border-red-500":""}),d.milestones?(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.milestones}):(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum 0.01 tokens required"})]})]})]},s)),(0,r.jsxs)(i.$,{type:"button",variant:"outline",onClick:()=>{t([...e,{description:"",amount:""}])},className:"w-full",children:[(0,r.jsx)(C,{className:"h-4 w-4 mr-2"}),"Add Milestone"]}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg border",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(y.J,{className:"text-sm font-medium text-muted-foreground",children:"Total Milestone Amount:"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-primary",children:e.reduce((e,t)=>e+(Number.parseFloat(t.amount)||0),0).toFixed(2)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(y.J,{className:"text-sm font-medium text-muted-foreground",children:"Target Total:"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-foreground",children:l||"0.00"})]})]}),d.totalMismatch&&(0,r.jsxs)("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:[(0,r.jsx)("p",{className:"text-red-600 text-sm font-medium",children:"Amount mismatch"}),(0,r.jsx)("p",{className:"text-red-500 text-sm",children:d.totalMismatch})]})]})]})]})}var q=s(400),S=s(41274),R=s(8495),$=s(95649);function O({formData:e,onConfirm:t,isSubmitting:s,isContractPaused:a}){let{isSmartAccountReady:i}=(0,o.y)(),n=e.milestones.reduce((e,t)=>e+Number.parseFloat(t.amount||"0"),0),l=.01>Math.abs(n-Number.parseFloat(e.totalBudget));return(0,r.jsxs)(b.Zp,{className:"glass border-primary/20 p-6",children:[(0,r.jsx)(b.aR,{children:(0,r.jsx)(b.ZB,{children:"Review & Confirm"})}),(0,r.jsxs)(b.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-lg mb-2",children:e.projectTitle}),(0,r.jsx)("p",{className:"text-muted-foreground",children:e.projectDescription})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(q.A,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsxs)("span",{className:"text-sm",children:[e.duration," days"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(S.A,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsxs)("span",{className:"text-sm",children:[e.totalBudget," tokens"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(R.A,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsx)("span",{className:"text-sm",children:e.isOpenJob?"Open Job":"Direct Assignment"})]})]}),e.beneficiary&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Beneficiary:"}),(0,r.jsx)("p",{className:"font-mono text-sm",children:e.beneficiary})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"font-medium mb-2",children:["Milestones (",e.milestones.length,")"]}),(0,r.jsx)("div",{className:"space-y-2",children:e.milestones.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/20 rounded",children:[(0,r.jsx)("span",{className:"text-sm",children:e.description}),(0,r.jsxs)("span",{className:"text-sm font-medium",children:[e.amount," tokens"]})]},t))})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"font-medium",children:"Total Milestone Amount:"}),(0,r.jsxs)("span",{className:"font-semibold",children:[n.toFixed(2)," tokens"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"font-medium",children:"Project Budget:"}),(0,r.jsxs)("span",{className:"font-semibold",children:[e.totalBudget," tokens"]})]}),!l&&(0,r.jsx)("p",{className:"text-sm text-destructive mt-2",children:"⚠️ Milestone amounts don't match project budget"})]})]}),(0,r.jsx)("div",{className:"flex gap-4",children:(0,r.jsx)("button",{type:"button",onClick:t,disabled:s||a||!l,className:"flex-1 bg-primary text-primary-foreground px-6 py-3 rounded-lg font-medium hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:s?"Creating Escrow...":i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($.A,{className:"h-4 w-4"}),"Create Gasless Escrow"]}):"Create Escrow"})})]})]})}function J(){let e=(0,g.useRouter)(),{wallet:t,getContract:c}=(0,n.$)(),{executeTransaction:b,isSmartAccountReady:j}=(0,o.y)(),{toast:y}=(0,l.dj)(),[v,N]=(0,a.useState)(1),[w,T]=(0,a.useState)(!1),[A,C]=(0,a.useState)(!1),[M,E]=(0,a.useState)(null),[P,F]=(0,a.useState)(!1),[B,q]=(0,a.useState)(!1),[S,R]=(0,a.useState)(!1),[$,J]=(0,a.useState)({}),[I,_]=(0,a.useState)({projectTitle:"",projectDescription:"",duration:"",totalBudget:"",beneficiary:"",token:x.cF,useNativeToken:!1,isOpenJob:!1,milestones:[{description:"",amount:""},{description:"",amount:""}]});x.cF;let W=()=>I.milestones.reduce((e,t)=>e+(Number.parseFloat(t.amount)||0),0),L=()=>{let e={},t=!1;if(1===v)(!I.projectTitle||I.projectTitle.length<3)&&(e.projectTitle="Project title must be at least 3 characters",t=!0),(!I.projectDescription||I.projectDescription.length<50)&&(e.projectDescription="Project description must be at least 50 characters",t=!0),(!I.duration||1>Number(I.duration)||Number(I.duration)>365)&&(e.duration="Duration must be between 1 and 365 days",t=!0),(!I.totalBudget||.01>Number(I.totalBudget))&&(e.totalBudget="Total budget must be at least 0.01 tokens",t=!0),I.isOpenJob||I.beneficiary&&/^0x[a-fA-F0-9]{40}$/.test(I.beneficiary)||(e.beneficiary="Valid beneficiary address is required for direct escrow",t=!0),I.useNativeToken||I.token&&/^0x[a-fA-F0-9]{40}$/.test(I.token)||(e.tokenAddress="Valid token address is required for custom ERC20 tokens",t=!0);else if(2===v){let s=W(),r=Number.parseFloat(I.totalBudget)||0;I.milestones.some(e=>!e.description||!e.amount)&&(e.milestones="Please fill in all milestone details",t=!0),Math.abs(s-r)>.01&&(e.totalMismatch=`Milestone amounts (${s}) must equal total amount (${r})`,t=!0)}return J(e),!t},z=()=>{J({})},G=()=>{let e=[];(!I.projectTitle||I.projectTitle.length<3)&&e.push("Project title must be at least 3 characters long"),(!I.projectDescription||I.projectDescription.length<50)&&e.push("Project description must be at least 50 characters long"),(!I.duration||1>Number(I.duration)||Number(I.duration)>365)&&e.push("Duration must be between 1 and 365 days"),(!I.totalBudget||.01>Number(I.totalBudget))&&e.push("Total budget must be at least 0.01 tokens"),I.isOpenJob||(I.beneficiary?/^0x[a-fA-F0-9]{40}$/.test(I.beneficiary)||e.push("Beneficiary address must be a valid Ethereum address"):e.push("Beneficiary address is required for direct escrow")),0===I.milestones.length&&e.push("At least one milestone is required");for(let t=0;t<I.milestones.length;t++){let s=I.milestones[t];(!s.description||s.description.length<10)&&e.push(`Milestone ${t+1} description must be at least 10 characters long`),(!s.amount||.01>Number(s.amount))&&e.push(`Milestone ${t+1} amount must be at least 0.01 tokens`)}return Math.abs(I.milestones.reduce((e,t)=>e+Number(t.amount||0),0)-Number(I.totalBudget))>.01&&e.push("Total milestone amounts must equal the total budget"),e},H=async()=>{if(!t.isConnected){y({title:"Wallet not connected",description:"Please connect your wallet to create an escrow",variant:"destructive"});return}let r=G();if(r.length>0){y({title:"Form validation failed",description:r.join(", "),variant:"destructive"});return}if(!I.token){y({title:"Invalid token address",description:"Please select a token type",variant:"destructive"});return}T(!0);try{let r;if(I.token!==x.cF){let e=c(I.token,f.i),s=BigInt(Math.floor(1e18*Number.parseFloat(I.totalBudget))).toString();try{await e.call("name"),await e.call("symbol"),await e.call("decimals")}catch(e){throw Error("Token contract is not working properly. Please check the token address.")}try{let r=await e.call("balanceOf",t.address);if(Number(r)<Number(s))throw Error(`Insufficient token balance. You have ${(Number(r)/1e18).toFixed(2)} tokens but need ${I.totalBudget} tokens.`)}catch(e){throw Error("Failed to check token balance. Please ensure you have enough tokens or try using native MON tokens instead.")}await e.send("approve","no-value",x.oB.SECUREFLOW_ESCROW,s),y({title:"Approval submitted",description:"Waiting for token approval confirmation..."}),await new Promise(e=>setTimeout(e,2e3))}let a=c(x.oB.SECUREFLOW_ESCROW,f.f),i=I.milestones.map(e=>e.description),n=B?"0x0000000000000000000000000000000000000000":I.beneficiary||"0x0000000000000000000000000000000000000000";if(I.token===x.cF){let e=BigInt(Math.floor(1e18*Number.parseFloat(I.totalBudget))).toString();try{let s=await window.ethereum.request({method:"eth_getBalance",params:[t.address]}),r=BigInt(s),a=BigInt(e);if(r<a)throw Error(`Insufficient MON balance. You have ${(Number(r)/1e18).toFixed(4)} MON but need ${I.totalBudget} MON.`)}catch(e){throw Error("Failed to check MON balance. Please ensure you have enough MON tokens.")}let o=I.milestones.map(e=>BigInt(Math.floor(1e18*Number.parseFloat(e.amount))).toString()),l=["0x3be7fbbdbc73fc4731d60ef09c4ba1a94dc58e41"],d=86400*Number(I.duration),c=0;for(;c<3;)try{await a.estimateGas("createEscrowNative",e,n,l,1,o,i,d,I.projectTitle,I.projectDescription);break}catch(e){if(++c>=3){BigInt(5e5);break}await new Promise(e=>setTimeout(e,1e3))}let u=0;for(;u<3;)try{if(j){let{ethers:t}=await s.e(363).then(s.bind(s,363)),a=new t.Interface(f.f).encodeFunctionData("createEscrowNative",[n,l,1,o,i,d,I.projectTitle,I.projectDescription]);r=await b(x.oB.SECUREFLOW_ESCROW,a,(Number(e)/1e18).toString()),y({title:"\uD83D\uDE80 Gasless Escrow Created!",description:"Escrow created with no gas fees using Smart Account delegation"})}else r=await a.send("createEscrowNative",`0x${BigInt(e).toString(16)}`,n,l,1,o,i,d,I.projectTitle,I.projectDescription),y({title:"Escrow Created!",description:"Your escrow has been created successfully"});break}catch(t){if(++u>=3)throw t;let e=1e3*Math.pow(2,u);await new Promise(t=>setTimeout(t,e))}}else{let e=["0x3be7fbbdbc73fc4731d60ef09c4ba1a94dc58e41"],t=I.milestones.map(e=>BigInt(Math.floor(1e18*Number.parseFloat(e.amount))).toString()),o=86400*Number(I.duration);if(j){let{ethers:a}=await s.e(363).then(s.bind(s,363)),l=new a.Interface(f.f).encodeFunctionData("createEscrow",[n,e,1,t,i,I.token,o,I.projectTitle,I.projectDescription]);r=await b(x.oB.SECUREFLOW_ESCROW,l,"0"),y({title:"\uD83D\uDE80 Gasless ERC20 Escrow Created!",description:"ERC20 escrow created with no gas fees using Smart Account delegation"})}else r=await a.send("createEscrow","no-value",n,e,1,t,i,I.token,o,I.projectTitle,I.projectDescription),y({title:"ERC20 Escrow Created!",description:"Your ERC20 escrow has been created successfully"})}if(j){let t;let s=0;for(;s<30;){try{if(t=await window.ethereum.request({method:"eth_getTransactionReceipt",params:[r]}))break}catch(e){}await new Promise(e=>setTimeout(e,2e3)),s++}if(!t)throw Error("Transaction timeout - please check the blockchain explorer");if("0x1"===t.status)y({title:B?"\uD83D\uDE80 Gasless Job Posted!":"\uD83D\uDE80 Gasless Escrow Created!",description:B?"Your job is now live with no gas fees! Freelancers can apply on the Browse Jobs page.":"Your escrow has been created successfully with no gas fees! The freelancer can now start working."}),setTimeout(()=>{e.push(B?"/jobs":"/dashboard")},2e3);else throw Error("Transaction failed on blockchain")}else{let t;let s=0;for(;s<30;){try{if(t=await window.ethereum.request({method:"eth_getTransactionReceipt",params:[r]}))break}catch(e){}await new Promise(e=>setTimeout(e,2e3)),s++}if(!t)throw Error("Transaction timeout - please check the blockchain explorer");if("0x1"===t.status)y({title:B?"Job posted!":"Escrow created!",description:B?"Your job is now live. Freelancers can apply on the Browse Jobs page.":"Your escrow has been successfully created"}),setTimeout(()=>{e.push(B?"/jobs":"/dashboard")},2e3);else throw Error("Transaction failed on blockchain")}}catch(t){let e="Failed to create escrow";y({title:"Creation failed",description:t.message?.includes("insufficient funds")?"Insufficient funds. Please check your balance.":t.message?.includes("gas")?"Gas estimation failed. Please try again.":t.message?.includes("revert")?"Transaction reverted. Please check your parameters.":t.message?.includes("user rejected")?"Transaction was rejected by user.":t.message?.includes("timeout")?"Transaction timeout. Please try again.":t.message?.includes("Internal JSON-RPC error")?"Network error occurred. Please try again - this usually works on the second attempt.":-32603===t.code?"RPC error occurred. Please try again - this usually works on the second attempt.":t.message||"Failed to create escrow",variant:"destructive"}),(t.message?.includes("Internal JSON-RPC error")||-32603===t.code)&&setTimeout(()=>{y({title:"\uD83D\uDCA1 Tip",description:"This is a common network issue. Please try creating the escrow again - it usually works on the second attempt!",variant:"default"})},2e3)}finally{T(!1)}};return(0,r.jsx)("div",{className:"min-h-screen py-12 gradient-mesh",children:(0,r.jsx)("div",{className:"container mx-auto px-4 max-w-4xl",children:(0,r.jsxs)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,r.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-center",children:"Create New Escrow"}),(0,r.jsx)("p",{className:"text-xl text-muted-foreground text-center mb-12",children:"Set up a secure escrow with milestone-based payments"}),(0,r.jsx)("div",{className:"flex items-center justify-center mb-12",children:(0,r.jsx)("div",{className:"flex items-center gap-4",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all ${e===v?"border-primary bg-primary text-primary-foreground":e<v?"border-primary bg-primary/20 text-primary":"border-muted-foreground/30 text-muted-foreground"}`,children:e<v?(0,r.jsx)(d.A,{className:"h-5 w-5"}):e}),e<3&&(0,r.jsx)("div",{className:`w-16 h-0.5 ${e<v?"bg-primary":"bg-muted-foreground/30"}`})]},e))})}),(0,r.jsxs)(h.N,{mode:"wait",children:[1===v&&(0,r.jsx)(p.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,r.jsx)(k,{formData:I,onUpdate:e=>{_({...I,...e}),z()},isContractPaused:S,errors:{projectTitle:$.projectTitle,projectDescription:$.projectDescription,duration:$.duration,totalBudget:$.totalBudget,beneficiary:$.beneficiary,tokenAddress:$.tokenAddress}})},"step1"),2===v&&(0,r.jsx)(p.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,r.jsx)(D,{milestones:I.milestones,onUpdate:e=>{_({...I,milestones:e}),z()},showAIWriter:A,onToggleAIWriter:C,currentMilestoneIndex:M,onSetCurrentMilestoneIndex:E,totalBudget:I.totalBudget,errors:{milestones:$.milestones,totalMismatch:$.totalMismatch}})},"step2"),3===v&&(0,r.jsx)(p.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,r.jsx)(O,{formData:I,onConfirm:H,isSubmitting:w,isContractPaused:S})},"step3")]}),(0,r.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,r.jsxs)(i.$,{type:"button",variant:"outline",onClick:()=>{N(v-1)},disabled:1===v,className:"flex items-center gap-2",children:[(0,r.jsx)(u,{className:"h-4 w-4"}),"Previous"]}),(0,r.jsxs)(i.$,{type:"button",onClick:()=>{L()&&N(v+1)},disabled:3===v,className:"flex items-center gap-2",children:["Next",(0,r.jsx)(m.A,{className:"h-4 w-4"})]})]})]})})})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16495:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(5853),a=s(60554),i=s(30708),n=s.n(i),o=s(8067),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d={children:["",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,83456)),"/home/oluwagbemiga/Desktop/Hackathons/Solidity/frontend/frontend/app/create/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,97898)),"/home/oluwagbemiga/Desktop/Hackathons/Solidity/frontend/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,92192,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,82137,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,48358,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/home/oluwagbemiga/Desktop/Hackathons/Solidity/frontend/frontend/app/create/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/create/page",pathname:"/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},16601:(e,t,s)=>{Promise.resolve().then(s.bind(s,83456))},19084:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(33922).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},41274:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(33922).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},46180:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(33922).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},53049:(e,t,s)=>{Promise.resolve().then(s.bind(s,10490))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57144:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var r=s(28625),a=s(64996),i=s(36761);let n=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));n.displayName="Textarea"},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72478:(e,t,s)=>{"use strict";s.d(t,{J:()=>p});var r=s(28625),a=s(64996);function i(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}s(58709);var n=Symbol("radix.slottable");function o(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===n}var l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let s=function(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:s,...r}=e;if(a.isValidElement(s)){var n;let e,o;let l=(n=s,(o=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(o=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),d=function(e,t){let s={...t};for(let r in t){let a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?s[r]=(...e)=>{let t=i(...e);return a(...e),t}:a&&(s[r]=a):"style"===r?s[r]={...a,...i}:"className"===r&&(s[r]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}(r,s.props);return s.type!==a.Fragment&&(d.ref=t?function(...e){return t=>{let s=!1,r=e.map(e=>{let r=i(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():i(e[t],null)}}}}(t,l):l),a.cloneElement(s,d)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=a.forwardRef((e,s)=>{let{children:i,...n}=e,l=a.Children.toArray(i),d=l.find(o);if(d){let e=d.props.children,i=l.map(t=>t!==d?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,r.jsx)(t,{...n,ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,i):null})}return(0,r.jsx)(t,{...n,ref:s,children:i})});return s.displayName=`${e}.Slot`,s}(`Primitive.${t}`),n=a.forwardRef((e,a)=>{let{asChild:i,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(i?s:t,{...n,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),d=a.forwardRef((e,t)=>(0,r.jsx)(l.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));d.displayName="Label";var c=s(44714),u=s(36761);let m=(0,c.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),p=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(d,{ref:s,className:(0,u.cn)(m(),e),...t}));p.displayName=d.displayName},74075:e=>{"use strict";e.exports=require("zlib")},77598:e=>{"use strict";e.exports=require("node:crypto")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83456:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(20413).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/oluwagbemiga/Desktop/Hackathons/Solidity/frontend/frontend/app/create/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/oluwagbemiga/Desktop/Hackathons/Solidity/frontend/frontend/app/create/page.tsx","default")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},95649:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(33922).A)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[521,56],()=>s(16495));module.exports=r})();